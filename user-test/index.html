<!DOCTYPE html>
<header>
    <title>Ui lib test</title>
    </header>
<body>
    <h1>Ui lib test</h1>
    <div id="ui-lib">
        <button id="showpopup">Show popup</button>
    </div>

    <script src="./main.js?r=14"></script>
    <script>
        document.onreadystatechange = function () {
            if (document.readyState == "interactive") {
                let showPopupButton = document.getElementById("showpopup");
                let popupContents = function() {
                    let wrapper = document.createElement('div'),
                        contents = document.createElement('p'),
                        closePopupButton = document.createElement('button');
                    contents.innerText = "Hello, i'm a popup";
                    closePopupButton.innerText = "Close popup";
                    wrapper.appendChild(contents);
                    wrapper.appendChild(closePopupButton);
                    return wrapper;
                }
                let popup = new Popup("default", popupContents(), false);
                popup.popupWindow.querySelector("button").onclick = function() {
                    popup.close();
                };
                showPopupButton.onclick = function() {
                    popup.open();
                };
            }
        };
    </script>
</body>